<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∞—Ö—Ç–µ—Ä—Å–∫–∏–π –ö–ª–∏–∫–µ—Ä</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
            padding: 20px;
        }
        .game-container {
            background: #1a252f;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            max-width: 500px;
            width: 100%;
            border: 2px solid #f39c12;
        }
        .score {
            font-size: 48px;
            color: #f39c12;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(243, 156, 18, 0.5);
        }
        .level-info {
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #ecf0f1;
            border: 1px solid #f39c12;
        }
        .stats {
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #ecf0f1;
            border: 1px solid #f39c12;
        }
        .mob-container {
            background: #2c3e50;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid #f39c12;
        }
        .mob {
            margin: 10px 0;
            padding: 10px;
            background: #34495e;
            border-radius: 8px;
            border: 1px solid #f39c12;
        }
        .mob-health {
            width: 100%;
            height: 20px;
            background: #2c3e50;
            border-radius: 10px;
            margin-top: 5px;
            overflow: hidden;
        }
        .mob-health-fill {
            height: 100%;
            transition: width 0.3s ease;
        }
        .mob-reward {
            font-size: 12px;
            color: #f39c12;
            margin-top: 5px;
        }
        .mob-damage-limit {
            font-size: 11px;
            color: #e74c3c;
            margin-top: 3px;
        }
        .click-btn {
            padding: 30px 60px;
            font-size: 28px;
            background: linear-gradient(45deg, #e67e22, #f39c12);
            color: #2c3e50;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(230, 126, 34, 0.4);
            margin-bottom: 20px;
            position: relative;
            font-weight: bold;
        }
        .click-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(230, 126, 34, 0.6);
        }
        .click-btn:active {
            transform: scale(0.95);
        }
        .shop-btn {
            padding: 15px 30px;
            font-size: 18px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
            margin-bottom: 20px;
            width: 100%;
            font-weight: bold;
        }
        .shop-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.6);
        }
        .shop-container {
            margin-top: 20px;
            text-align: left;
            display: none;
        }
        .shop-container.active {
            display: block;
        }
        .shop h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #f39c12;
            text-shadow: 0 0 5px rgba(243, 156, 18, 0.5);
        }
        .upgrade {
            padding: 12px 20px;
            margin: 8px 0;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: #2c3e50;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: all 0.3s;
            position: relative;
            font-weight: bold;
        }
        .upgrade:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .upgrade:disabled {
            background: #7f8c8d !important;
            color: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .upgrade-info {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
            color: #2c3e50;
        }
        .upgrade-level {
            font-size: 11px;
            color: #34495e;
            margin-top: 3px;
        }
        .control-buttons {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
        .control-btn {
            padding: 10px 20px;
            background: #7f8c8d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            flex: 1;
            font-weight: bold;
        }
        .control-btn:hover {
            background: #95a5a6;
        }
        .click-animation {
            position: fixed;
            pointer-events: none;
            font-size: 24px;
            font-weight: bold;
            animation: floatUp 1s ease-out forwards;
            z-index: 1000;
        }
        .critical-damage {
            position: fixed;
            pointer-events: none;
            font-size: 36px;
            font-weight: bold;
            color: #f39c12;
            animation: criticalDamageFloat 1.5s ease-out forwards;
            z-index: 1000;
            text-shadow: 0 0 15px rgba(243, 156, 18, 0.9);
        }
        .mob-damage {
            position: fixed;
            pointer-events: none;
            font-size: 24px;
            font-weight: bold;
            color: #e74c3c;
            animation: floatUp 1s ease-out forwards;
            z-index: 1000;
            text-shadow: 0 0 10px rgba(231, 76, 60, 0.7);
        }
        @keyframes floatUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-80px); opacity: 0; }
        }
        @keyframes criticalDamageFloat {
            0% { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
            50% { 
                transform: translateY(-50px) scale(1.3); 
                opacity: 1; 
            }
            100% { 
                transform: translateY(-120px) scale(1); 
                opacity: 0; 
            }
        }
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #34495e;
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #f39c12, #e67e22);
            transition: width 0.3s ease;
        }
        .miner-icon {
            font-size: 20px;
            margin-right: 5px;
        }
        .level-progress {
            width: 100%;
            height: 10px;
            background: #34495e;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        .level-progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #3498db, #2980b9);
            transition: width 0.3s ease;
        }
        .critical-info {
            font-size: 12px;
            color: #f39c12;
            margin-top: 3px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="score">‚õèÔ∏è <span id="score">0</span> –∑–æ–ª–æ—Ç–∞</div>
        
        <div class="level-info">
            <div>‚≠ê –£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
            <div>üìä –û–ø—ã—Ç: <span id="exp">0</span>/<span id="expToNextLevel">100</span></div>
            <div class="level-progress">
                <div class="level-progress-fill" id="levelProgress" style="width: 0%"></div>
            </div>
        </div>
        
        <div class="stats">
            <div>üóø –°–∏–ª–∞ –∫–∏—Ä–∫–∏: <span id="clickPower">1</span></div>
            <div>ü§ñ –ê–≤—Ç–æ-—à–∞—Ö—Ç–µ—Ä—ã: <span id="autoClickers">0</span> (+<span id="autoClickPower">0</span>/—Å–µ–∫)</div>
            <div>üí• –ö—Ä–∏—Ç. —à–∞–Ω—Å: <span id="criticalChance">0%</span> (√ó<span id="criticalMultiplier">10</span>)</div>
            <div>üî® –í—Å–µ–≥–æ —É–¥–∞—Ä–æ–≤: <span id="totalClicks">0</span></div>
            <div>üí∞ –û–±—â–∞—è –¥–æ–±—ã—á–∞: <span id="totalEarned">0</span></div>
        </div>
        
        <div class="mob-container">
            <h3>üëπ –ü–æ–¥–∑–µ–º–Ω—ã–µ –º–æ–Ω—Å—Ç—Ä—ã</h3>
            <div class="mob" id="currentMob">
                <div><span id="mobIcon">ü™®</span> <span id="mobName">–ö–∞–º–µ–Ω–Ω—ã–π –≥–æ–ª–µ–º</span> <span id="mobLevel">1</span> —É—Ä.</div>
                <div class="mob-health">
                    <div class="mob-health-fill" id="mobHealthFill" style="width: 100%"></div>
                </div>
                <div class="mob-reward">–ù–∞–≥—Ä–∞–¥–∞: <span id="mobReward">100</span> –∑–æ–ª–æ—Ç–∞ + <span id="mobExp">20</span> –æ–ø—ã—Ç–∞</div>
                <div class="mob-damage-limit">–õ–∏–º–∏—Ç —É—Ä–æ–Ω–∞ –∑–∞ —É–¥–∞—Ä: <span id="mobDamageLimit">3</span></div>
            </div>
            <div>–°–ª–µ–¥—É—é—â–∏–π –º–æ–Ω—Å—Ç—Ä —á–µ—Ä–µ–∑: <span id="nextMobTimer">10</span> —Å–µ–∫.</div>
        </div>
        
        <button class="click-btn" onclick="addClick(event)">‚õèÔ∏è –ö–û–ü–ê–¢–¨!</button>
        
        <!-- –û—Ç–¥–µ–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ -->
        <button class="shop-btn" onclick="toggleShop()">üõí –û–¢–ö–†–´–¢–¨ –õ–ê–í–ö–£</button>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
        <div class="shop-container" id="shopContainer">
            <div class="shop">
                <h3>üõí –õ–∞–≤–∫–∞ —à–∞—Ö—Ç–µ—Ä–∞</h3>
                
                <button class="upgrade" onclick="buyUpgrade('autoClicker')" id="autoClickerBtn">
                    <span class="miner-icon">ü§ñ</span> –£–î–í–û–ò–¢–ï–õ–¨ –®–ê–•–¢–ï–†–û–í
                    <div class="upgrade-info">
                        <span>–£—Ä–æ–≤–µ–Ω—å: <span id="autoClickerLevel">0</span></span>
                        <span>–¶–µ–Ω–∞: <span id="autoClickerPrice">100</span> –∑–æ–ª–æ—Ç–∞</span>
                    </div>
                    <div class="upgrade-info">
                        <span>–î–æ–±—ã—á–∞: <span id="currentAutoClickerPower">1</span>/—Å–µ–∫</span>
                        <span>–°–ª–µ–¥—É—é—â–∏–π: √ó<span id="nextAutoClicker">2</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="autoClickerProgress" style="width: 0%"></div>
                    </div>
                </button>
                
                <button class="upgrade" onclick="buyUpgrade('clickPower')" id="clickPowerBtn">
                    <span class="miner-icon">‚ö°</span> –£—Å–∏–ª–µ–Ω–∏–µ –∫–∏—Ä–∫–∏
                    <div class="upgrade-info">
                        <span>–£—Ä–æ–≤–µ–Ω—å: <span id="clickPowerLevel">0</span></span>
                        <span>–¶–µ–Ω–∞: <span id="clickPowerPrice">50</span> –∑–æ–ª–æ—Ç–∞</span>
                    </div>
                    <div class="upgrade-info">
                        <span>+1 –∑–∞ —É–¥–∞—Ä</span>
                        <span>–°–ª–µ–¥—É—é—â–∏–π: +<span id="nextClickPower">1</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="clickPowerProgress" style="width: 0%"></div>
                    </div>
                </button>
                
                <button class="upgrade" onclick="buyUpgrade('megaClick')" id="megaClickBtn">
                    <span class="miner-icon">üí•</span> –£–º–Ω–æ–∂–∏—Ç–µ–ª—å —É–¥–∞—Ä–∞
                    <div class="upgrade-info">
                        <span>–£—Ä–æ–≤–µ–Ω—å: <span id="megaClickLevel">0</span></span>
                        <span>–¶–µ–Ω–∞: <span id="megaClickPrice">200</span> –∑–æ–ª–æ—Ç–∞</span>
                    </div>
                    <div class="upgrade-info">
                        <span>√ó2 –∫ —Å–∏–ª–µ</span>
                        <span>–°–ª–µ–¥—É—é—â–∏–π: √ó<span id="nextMegaClick">2</span></span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="megaClickProgress" style="width: 0%"></div>
                    </div>
                </button>

                <button class="upgrade" onclick="buyUpgrade('criticalClick')" id="criticalClickBtn">
                    <span class="miner-icon">üíé</span> –ë–æ–≥–∞—Ç–∞—è –∂–∏–ª–∞
                    <div class="upgrade-info">
                        <span>–£—Ä–æ–≤–µ–Ω—å: <span id="criticalClickLevel">0</span></span>
                        <span>–¶–µ–Ω–∞: <span id="criticalClickPrice">300</span> –∑–æ–ª–æ—Ç–∞</span>
                    </div>
                    <div class="upgrade-info">
                        <span>–®–∞–Ω—Å: <span id="currentCriticalChance">0%</span></span>
                        <span>–°–ª–µ–¥—É—é—â–∏–π: +<span id="nextCriticalChance">1%</span></span>
                    </div>
                    <div class="critical-info">
                        –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä –Ω–∞–Ω–æ—Å–∏—Ç √ó10 —É—Ä–æ–Ω–∞ (—Å —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–∞)!
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="criticalClickProgress" style="width: 0%"></div>
                    </div>
                </button>
            </div>

            <div class="control-buttons">
                <button class="control-btn" onclick="saveGame()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="control-btn" onclick="resetGame()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                <button class="control-btn" onclick="exportSave()">üì§ –≠–∫—Å–ø–æ—Ä—Ç</button>
            </div>
        </div>
    </div>

    <script>
        class AdvancedClickerGame {
            constructor() {
                // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
                this.score = 0;
                this.totalClicks = 0;
                this.totalEarned = 0;
                this.baseClickPower = 1; // –ë–∞–∑–æ–≤—ã–π –∫–ª–∏–∫ = 1
                
                // –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
                this.level = 1;
                this.exp = 0;
                this.expToNextLevel = 100;
                
                // –°–∏—Å—Ç–µ–º–∞ –º–æ–±–æ–≤
                this.currentMob = null;
                this.mobSpawnTimer = 0;
                this.mobSpawnInterval = 10; // —Å–µ–∫—É–Ω–¥—ã
                this.mobsDefeated = 0;
                
                // –°–∏—Å—Ç–µ–º–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–Ω–∞
                this.criticalMultiplier = 10; // √ó10 —É—Ä–æ–Ω–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É–¥–∞—Ä–µ
                
                // –¢–∏–ø—ã –º–æ–±–æ–≤
                this.mobTypes = [
                    { name: "–ö–∞–º–µ–Ω–Ω—ã–π –≥–æ–ª–µ–º", icon: "ü™®", color: "#95a5a6" },
                    { name: "–û–≥–Ω–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç–∞–ª—å", icon: "üî•", color: "#e74c3c" },
                    { name: "–õ–µ–¥—è–Ω–æ–π –ø—Ä–∏–∑—Ä–∞–∫", icon: "‚ùÑÔ∏è", color: "#3498db" },
                    { name: "–ó–µ–º–ª—è–Ω–æ–π —á–µ—Ä–≤—å", icon: "üêõ", color: "#27ae60" },
                    { name: "–¢–µ–º–Ω—ã–π –¥–µ–º–æ–Ω", icon: "üëø", color: "#8e44ad" },
                    { name: "–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π –¥—Ä–∞–∫–æ–Ω", icon: "üêâ", color: "#9b59b6" },
                    { name: "–î—Ä–µ–≤–Ω–∏–π —Ç–∏—Ç–∞–Ω", icon: "üóø", color: "#7f8c8d" },
                    { name: "–ë–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π —Ñ–µ–Ω–∏–∫—Å", icon: "ü¶Ö", color: "#e67e22" }
                ];
                
                // –°–∏—Å—Ç–µ–º–∞ —É–ª—É—á—à–µ–Ω–∏–π —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏
                this.upgrades = {
                    autoClicker: {
                        level: 0,
                        basePrice: 100,
                        currentPrice: 100,
                        basePower: 1,
                        type: 'exponential'
                    },
                    clickPower: {
                        level: 0,
                        basePrice: 50,
                        currentPrice: 50,
                        power: 1,
                        type: 'additive'
                    },
                    megaClick: {
                        level: 0,
                        basePrice: 200,
                        currentPrice: 200,
                        power: 2,
                        type: 'multiplier'
                    },
                    criticalClick: {
                        level: 0,
                        basePrice: 300,
                        currentPrice: 300,
                        power: 0.01, // +1% –∑–∞ —É—Ä–æ–≤–µ–Ω—å
                        baseChance: 0, // –Ω–∞—á–∞–ª—å–Ω—ã–π —à–∞–Ω—Å 0%
                        type: 'critical'
                    }
                };
                
                this.loadGame();
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä—ã
                setInterval(() => {
                    const autoClickersPower = this.getAutoClickerPower();
                    if (autoClickersPower > 0) {
                        this.score += autoClickersPower;
                        this.totalEarned += autoClickersPower;
                        this.updateDisplay();
                        this.saveGame();
                    }
                }, 1000);
                
                // –°–∏—Å—Ç–µ–º–∞ –º–æ–±–æ–≤
                setInterval(() => {
                    this.updateMobSystem();
                }, 1000);

                // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
                setInterval(() => {
                    this.saveGame();
                }, 10000);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ –º–æ–±–∞
                if (!this.currentMob) {
                    this.spawnMob();
                }
            }
            
            addClick() {
                let baseEarned = this.baseClickPower;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–ª—É –∫–ª–∏–∫–∞ –æ—Ç —É–ª—É—á—à–µ–Ω–∏—è
                baseEarned += this.upgrades.clickPower.level * this.upgrades.clickPower.power;
                
                // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å
                const multiplier = this.upgrades.megaClick.level > 0 ? 
                    Math.pow(this.upgrades.megaClick.power, this.upgrades.megaClick.level) : 1;
                
                let earned = baseEarned * multiplier;
                let isCritical = false;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä
                if (this.upgrades.criticalClick.level > 0) {
                    const criticalChance = this.getCurrentCriticalChance() / 100;
                    if (Math.random() < criticalChance) {
                        earned *= this.criticalMultiplier;
                        isCritical = true;
                    }
                }
                
                this.score += earned;
                this.totalClicks++;
                this.totalEarned += earned;
                
                // –ê—Ç–∞–∫–∞ –º–æ–±–∞, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
                if (this.currentMob) {
                    this.attackMob(earned, isCritical);
                }
                
                this.saveGame();
                
                return { earned, isCritical };
            }
            
            buyUpgrade(type) {
                const upgrade = this.upgrades[type];
                
                if (this.score >= upgrade.currentPrice) {
                    this.score -= upgrade.currentPrice;
                    upgrade.level += 1;
                    
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–µ–Ω—É –≤ 3 —Ä–∞–∑–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
                    upgrade.currentPrice = Math.floor(upgrade.basePrice * Math.pow(3, upgrade.level));
                    
                    this.saveGame();
                    this.updateDisplay();
                    return true;
                }
                return false;
            }
            
            getAutoClickerPower() {
                const upgrade = this.upgrades.autoClicker;
                // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç: 1, 2, 4, 8, 16, 32...
                return upgrade.level > 0 ? Math.pow(2, upgrade.level - 1) : 0;
            }
            
            getNextAutoClickerPower() {
                const upgrade = this.upgrades.autoClicker;
                // –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –±—É–¥–µ—Ç –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —Ç–µ–∫—É—â–µ–≥–æ
                return upgrade.level > 0 ? Math.pow(2, upgrade.level) : 1;
            }
            
            getUpgradeEffect(type) {
                const upgrade = this.upgrades[type];
                switch(type) {
                    case 'autoClicker':
                        return `√ó2 –∫ —Å–∏–ª–µ`;
                    case 'clickPower':
                        return `+${upgrade.power} –∑–∞ —É–¥–∞—Ä`;
                    case 'megaClick':
                        return `√ó${upgrade.power} –∫ —Å–∏–ª–µ`;
                    case 'criticalClick':
                        return `${this.getCurrentCriticalChance().toFixed(1)}% —à–∞–Ω—Å √ó${this.criticalMultiplier}`;
                    default:
                        return '';
                }
            }
            
            getNextUpgradeEffect(type) {
                const upgrade = this.upgrades[type];
                switch(type) {
                    case 'autoClicker':
                        return '2';
                    case 'clickPower':
                        return upgrade.power;
                    case 'megaClick':
                        return upgrade.power;
                    case 'criticalClick':
                        return `${(upgrade.power * 100).toFixed(1)}%`;
                    default:
                        return '';
                }
            }
            
            getProgressPercentage(type) {
                const upgrade = this.upgrades[type];
                const nextPrice = upgrade.currentPrice;
                if (this.score >= nextPrice) return 100;
                return Math.min(100, (this.score / nextPrice) * 100);
            }
            
            getTotalClickPower() {
                let base = this.baseClickPower;
                base += this.upgrades.clickPower.level * this.upgrades.clickPower.power;
                
                const multiplier = this.upgrades.megaClick.level > 0 ? 
                    Math.pow(this.upgrades.megaClick.power, this.upgrades.megaClick.level) : 1;
                
                return base * multiplier;
            }
            
            getCurrentCriticalChance() {
                const upgrade = this.upgrades.criticalClick;
                // –ù–∞—á–∞–ª—å–Ω—ã–π —à–∞–Ω—Å 0% + 1% –∑–∞ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å
                return (upgrade.baseChance * 100) + (upgrade.level * upgrade.power * 100);
            }
            
            getNextCriticalChance() {
                const upgrade = this.upgrades.criticalClick;
                // –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–±–∞–≤–∏—Ç 1%
                return (upgrade.power * 100).toFixed(1);
            }
            
            // –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
            addExp(amount) {
                this.exp += amount;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                while (this.exp >= this.expToNextLevel) {
                    this.exp -= this.expToNextLevel;
                    this.levelUp();
                }
                
                this.updateDisplay();
            }
            
            levelUp() {
                this.level += 1;
                this.expToNextLevel = Math.floor(100 * Math.pow(1.5, this.level - 1));
                
                // –ë–æ–Ω—É—Å—ã –∑–∞ —É—Ä–æ–≤–µ–Ω—å
                this.score += this.level * 20; // –ë–æ–Ω—É—Å –∑–æ–ª–æ—Ç–∞
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è
                this.showLevelUpNotification();
            }
            
            showLevelUpNotification() {
                // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è
                const notification = document.createElement('div');
                notification.className = 'click-animation';
                notification.textContent = `üéâ –£—Ä–æ–≤–µ–Ω—å ${this.level}!`;
                notification.style.color = '#3498db';
                notification.style.fontSize = '32px';
                notification.style.textShadow = '0 0 10px rgba(52, 152, 219, 0.7)';
                notification.style.left = '50%';
                notification.style.top = '50%';
                notification.style.transform = 'translate(-50%, -50%)';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 2000);
            }
            
            // –°–∏—Å—Ç–µ–º–∞ –º–æ–±–æ–≤
            spawnMob() {
                const mobLevel = Math.max(1, Math.floor(this.level / 2) + Math.floor(Math.random() * 3));
                
                // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω–æ–≥–æ –º–æ–±–∞ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è
                const availableMobs = this.mobTypes.slice(0, Math.min(this.mobTypes.length, Math.floor(mobLevel / 2) + 1));
                const mobType = availableMobs[Math.floor(Math.random() * availableMobs.length)];
                
                // –ú–æ–±—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ —Å —É—Ä–æ–≤–Ω–µ–º
                const mobHealth = Math.floor(200 * Math.pow(2.5, mobLevel - 1));
                const mobReward = Math.floor(100 * Math.pow(1.8, mobLevel - 1));
                const mobExp = Math.floor(20 * Math.pow(1.4, mobLevel - 1));
                const damageLimit = 3; // –ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–Ω–∞ –∑–∞ —É–¥–∞—Ä
                
                this.currentMob = {
                    level: mobLevel,
                    health: mobHealth,
                    maxHealth: mobHealth,
                    reward: mobReward,
                    exp: mobExp,
                    damageLimit: damageLimit,
                    type: mobType
                };
                
                this.mobSpawnTimer = this.mobSpawnInterval;
                this.updateDisplay();
            }
            
            attackMob(damage, isCritical) {
                if (!this.currentMob) return;
                
                let actualDamage = damage;
                
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —É—Ä–æ–Ω –¥–ª—è –í–°–ï–• –∞—Ç–∞–∫ (–≤–∫–ª—é—á–∞—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ)
                if (actualDamage > this.currentMob.damageLimit) {
                    actualDamage = this.currentMob.damageLimit;
                }
                
                // –ï—Å–ª–∏ —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä, –ø—Ä–∏–º–µ–Ω—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞
                if (isCritical) {
                    // –í—ã—á–∏—Å–ª—è–µ–º –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω –±–µ–∑ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π
                    let baseDamage = this.baseClickPower;
                    baseDamage += this.upgrades.clickPower.level * this.upgrades.clickPower.power;
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ (–±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ)
                    const multiplier = this.upgrades.megaClick.level > 0 ? 
                        Math.pow(this.upgrades.megaClick.power, this.upgrades.megaClick.level) : 1;
                    
                    baseDamage = baseDamage * multiplier;
                    
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –±–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω
                    if (baseDamage > this.currentMob.damageLimit) {
                        baseDamage = this.currentMob.damageLimit;
                    }
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º—É –±–∞–∑–æ–≤–æ–º—É —É—Ä–æ–Ω—É
                    actualDamage = baseDamage * this.criticalMultiplier;
                    
                    // –°–Ω–æ–≤–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–Ω
                    if (actualDamage > this.currentMob.damageLimit) {
                        actualDamage = this.currentMob.damageLimit;
                    }
                }
                
                this.currentMob.health -= actualDamage;
                
                // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —É—Ä–æ–Ω–∞ –ø–æ –º–æ–±—É
                this.createMobDamageAnimation(actualDamage, isCritical);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ–±–µ–∂–¥–µ–Ω –ª–∏ –º–æ–±
                if (this.currentMob.health <= 0) {
                    this.defeatMob();
                }
                
                this.updateDisplay();
            }
            
            defeatMob() {
                // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ –º–æ–±–æ–º
                this.score += this.currentMob.reward;
                this.totalEarned += this.currentMob.reward;
                this.addExp(this.currentMob.exp);
                this.mobsDefeated += 1;
                
                // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–±–µ–¥–µ
                this.showMobDefeatedNotification(this.currentMob.reward, this.currentMob.exp);
                
                // –£–±–∏—Ä–∞–µ–º –º–æ–±–∞
                this.currentMob = null;
            }
            
            showMobDefeatedNotification(reward, exp) {
                const notification = document.createElement('div');
                notification.className = 'click-animation';
                notification.textContent = `üëπ –ú–æ–± –ø–æ–±–µ–∂–¥–µ–Ω! +${this.formatNumber(reward)} –∑–æ–ª–æ—Ç–∞ +${this.formatNumber(exp)} –æ–ø—ã—Ç–∞`;
                notification.style.color = '#f39c12';
                notification.style.fontSize = '20px';
                notification.style.textShadow = '0 0 10px rgba(243, 156, 18, 0.7)';
                notification.style.left = '50%';
                notification.style.top = '60%';
                notification.style.transform = 'translate(-50%, -50%)';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 2000);
            }
            
            createMobDamageAnimation(damage, isCritical) {
                const mobElement = document.getElementById('currentMob');
                const rect = mobElement.getBoundingClientRect();
                
                const animation = document.createElement('div');
                animation.className = isCritical ? 'critical-damage' : 'mob-damage';
                animation.textContent = `-${this.formatNumber(damage)}`;
                animation.style.left = (rect.left + rect.width / 2) + 'px';
                animation.style.top = (rect.top + rect.height / 2) + 'px';
                
                if (isCritical) {
                    animation.style.color = '#f39c12';
                    animation.style.textShadow = '0 0 15px rgba(243, 156, 18, 0.9)';
                }
                
                document.body.appendChild(animation);
                
                setTimeout(() => {
                    document.body.removeChild(animation);
                }, isCritical ? 1500 : 1000);
            }
            
            updateMobSystem() {
                if (this.currentMob) {
                    // –ú–æ–± —É–∂–µ –µ—Å—Ç—å, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
                    return;
                }
                
                // –£–º–µ–Ω—å—à–∞–µ–º —Ç–∞–π–º–µ—Ä –ø–æ—è–≤–ª–µ–Ω–∏—è –º–æ–±–∞
                this.mobSpawnTimer -= 1;
                
                // –ï—Å–ª–∏ —Ç–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫, —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –º–æ–±–∞
                if (this.mobSpawnTimer <= 0) {
                    this.spawnMob();
                }
                
                this.updateDisplay();
            }
            
            saveGame() {
                const saveData = {
                    score: this.score,
                    totalClicks: this.totalClicks,
                    totalEarned: this.totalEarned,
                    level: this.level,
                    exp: this.exp,
                    expToNextLevel: this.expToNextLevel,
                    mobsDefeated: this.mobsDefeated,
                    upgrades: this.upgrades,
                    timestamp: Date.now()
                };
                localStorage.setItem('clickerSave', JSON.stringify(saveData));
            }
            
            loadGame() {
                const save = localStorage.getItem('clickerSave');
                if (save) {
                    try {
                        const data = JSON.parse(save);
                        this.score = data.score || 0;
                        this.totalClicks = data.totalClicks || 0;
                        this.totalEarned = data.totalEarned || 0;
                        this.level = data.level || 1;
                        this.exp = data.exp || 0;
                        this.expToNextLevel = data.expToNextLevel || 100;
                        this.mobsDefeated = data.mobsDefeated || 0;
                        
                        // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è
                        if (data.upgrades) {
                            for (const type in data.upgrades) {
                                if (this.upgrades[type]) {
                                    this.upgrades[type].level = data.upgrades[type].level || 0;
                                    this.upgrades[type].currentPrice = data.upgrades[type].currentPrice || 
                                        Math.floor(this.upgrades[type].basePrice * Math.pow(3, this.upgrades[type].level));
                                }
                            }
                        }
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                    }
                }
            }
            
            resetGame() {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?')) {
                    this.score = 0;
                    this.totalClicks = 0;
                    this.totalEarned = 0;
                    this.level = 1;
                    this.exp = 0;
                    this.expToNextLevel = 100;
                    this.mobsDefeated = 0;
                    this.currentMob = null;
                    this.mobSpawnTimer = this.mobSpawnInterval;
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è
                    for (const type in this.upgrades) {
                        this.upgrades[type].level = 0;
                        this.upgrades[type].currentPrice = this.upgrades[type].basePrice;
                    }
                    
                    this.saveGame();
                    this.updateDisplay();
                    this.spawnMob();
                }
            }
            
            updateDisplay() {
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
                document.getElementById('score').textContent = this.formatNumber(this.score);
                document.getElementById('totalClicks').textContent = this.formatNumber(this.totalClicks);
                document.getElementById('totalEarned').textContent = this.formatNumber(this.totalEarned);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                const autoClickersPower = this.getAutoClickerPower();
                const totalClickPower = this.getTotalClickPower();
                
                document.getElementById('clickPower').textContent = this.formatNumber(totalClickPower);
                document.getElementById('autoClickers').textContent = this.upgrades.autoClicker.level;
                document.getElementById('autoClickPower').textContent = this.formatNumber(autoClickersPower);
                document.getElementById('criticalChance').textContent = `${this.getCurrentCriticalChance().toFixed(1)}%`;
                document.getElementById('criticalMultiplier').textContent = this.criticalMultiplier;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Ä–æ–≤–Ω—è—Ö
                document.getElementById('level').textContent = this.level;
                document.getElementById('exp').textContent = this.formatNumber(this.exp);
                document.getElementById('expToNextLevel').textContent = this.formatNumber(this.expToNextLevel);
                
                const levelProgress = (this.exp / this.expToNextLevel) * 100;
                document.getElementById('levelProgress').style.width = `${levelProgress}%`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–±–∞—Ö
                if (this.currentMob) {
                    document.getElementById('mobIcon').textContent = this.currentMob.type.icon;
                    document.getElementById('mobName').textContent = this.currentMob.type.name;
                    document.getElementById('mobLevel').textContent = this.currentMob.level;
                    const healthPercent = (this.currentMob.health / this.currentMob.maxHealth) * 100;
                    document.getElementById('mobHealthFill').style.width = `${healthPercent}%`;
                    document.getElementById('mobHealthFill').style.background = `linear-gradient(45deg, ${this.currentMob.type.color}, #c0392b)`;
                    document.getElementById('mobReward').textContent = this.formatNumber(this.currentMob.reward);
                    document.getElementById('mobExp').textContent = this.formatNumber(this.currentMob.exp);
                    document.getElementById('mobDamageLimit').textContent = this.currentMob.damageLimit;
                    document.getElementById('nextMobTimer').textContent = '--';
                } else {
                    document.getElementById('mobHealthFill').style.width = '0%';
                    document.getElementById('nextMobTimer').textContent = this.mobSpawnTimer;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–ª—É—á—à–µ–Ω–∏—è—Ö
                for (const type in this.upgrades) {
                    const upgrade = this.upgrades[type];
                    
                    document.getElementById(`${type}Level`).textContent = upgrade.level;
                    document.getElementById(`${type}Price`).textContent = this.formatNumber(upgrade.currentPrice);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    document.getElementById(`${type}Progress`).style.width = 
                        `${this.getProgressPercentage(type)}%`;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
                    const button = document.getElementById(`${type}Btn`);
                    const canAfford = this.score >= upgrade.currentPrice;
                    button.disabled = !canAfford;
                    
                    // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∏–ª—å –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–∏
                    if (!canAfford) {
                        button.style.background = '#7f8c8d';
                    } else {
                        button.style.background = 'linear-gradient(45deg, #27ae60, #2ecc71)';
                    }
                }
                
                // –û—Å–æ–±–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞
                document.getElementById('currentCriticalChance').textContent = 
                    `${this.getCurrentCriticalChance().toFixed(1)}%`;
                document.getElementById('nextCriticalChance').textContent = 
                    `${this.getNextCriticalChance()}%`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏–ª—É –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞
                document.getElementById('currentAutoClickerPower').textContent = this.formatNumber(this.getAutoClickerPower());
                document.getElementById('nextAutoClicker').textContent = this.getNextUpgradeEffect('autoClicker');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                document.getElementById('nextClickPower').textContent = this.getNextUpgradeEffect('clickPower');
                document.getElementById('nextMegaClick').textContent = this.getNextUpgradeEffect('megaClick');
            }
            
            formatNumber(num) {
                if (num >= 1000000000) { // 1 –º–∏–ª–ª–∏–∞—Ä–¥ –∏ –±–æ–ª—å—à–µ
                    return (num / 1000000000).toFixed(2) + 'B';
                }
                if (num >= 1000000) { // 1 –º–∏–ª–ª–∏–æ–Ω –∏ –±–æ–ª—å—à–µ
                    return (num / 1000000).toFixed(2) + 'M';
                }
                if (num >= 1000) { // 1 —Ç—ã—Å—è—á–∞ –∏ –±–æ–ª—å—à–µ
                    return (num / 1000).toFixed(1) + 'K';
                }
                return Math.floor(num).toString();
            }
            
            exportSave() {
                const saveData = {
                    score: this.score,
                    totalClicks: this.totalClicks,
                    totalEarned: this.totalEarned,
                    level: this.level,
                    exp: this.exp,
                    expToNextLevel: this.expToNextLevel,
                    mobsDefeated: this.mobsDefeated,
                    upgrades: this.upgrades,
                    timestamp: Date.now()
                };
                const saveString = btoa(JSON.stringify(saveData));
                prompt('–í–∞—à –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ):', saveString);
            }
            
            importSave(saveString) {
                try {
                    const saveData = JSON.parse(atob(saveString));
                    this.score = saveData.score || 0;
                    this.totalClicks = saveData.totalClicks || 0;
                    this.totalEarned = saveData.totalEarned || 0;
                    this.level = saveData.level || 1;
                    this.exp = saveData.exp || 0;
                    this.expToNextLevel = saveData.expToNextLevel || 100;
                    this.mobsDefeated = saveData.mobsDefeated || 0;
                    
                    if (saveData.upgrades) {
                        for (const type in saveData.upgrades) {
                            if (this.upgrades[type]) {
                                this.upgrades[type].level = saveData.upgrades[type].level || 0;
                                this.upgrades[type].currentPrice = saveData.upgrades[type].currentPrice || 
                                    Math.floor(this.upgrades[type].basePrice * Math.pow(3, this.upgrades[type].level));
                            }
                        }
                    }
                    
                    this.saveGame();
                    this.updateDisplay();
                    return true;
                } catch (e) {
                    alert('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!');
                    return false;
                }
            }
        }

        const game = new AdvancedClickerGame();

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
        function toggleShop() {
            const shopContainer = document.getElementById('shopContainer');
            const shopBtn = document.querySelector('.shop-btn');
            
            if (shopContainer.classList.contains('active')) {
                shopContainer.classList.remove('active');
                shopBtn.textContent = 'üõí –û–¢–ö–†–´–¢–¨ –õ–ê–í–ö–£';
                shopBtn.style.background = 'linear-gradient(45deg, #3498db, #2980b9)';
            } else {
                shopContainer.classList.add('active');
                shopBtn.textContent = '‚úñÔ∏è –ó–ê–ö–†–´–¢–¨ –õ–ê–í–ö–£';
                shopBtn.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–∞–≥–∞–∑–∏–Ω–∞
            game.updateDisplay();
        }

        function addClick(event) {
            const result = game.addClick();
            game.updateDisplay();
            
            // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–ª–∏–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º –∏ —Ü–≤–µ—Ç–æ–º
            createClickAnimation(event, result.earned, result.isCritical);
        }

        function createClickAnimation(event, amount, isCritical) {
            const animation = document.createElement('div');
            
            if (isCritical) {
                // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–¥–∞—Ä - –∫—Ä—É–ø–Ω–µ–µ –∏ –∑–æ–ª–æ—Ç–æ–π
                animation.className = 'critical-damage';
                animation.textContent = `+${game.formatNumber(amount)}`;
                animation.style.color = '#f39c12';
                animation.style.textShadow = '0 0 15px rgba(243, 156, 18, 0.9)';
            } else {
                // –û–±—ã—á–Ω—ã–π —É–¥–∞—Ä - —á–µ—Ä–Ω—ã–π —Ü–≤–µ—Ç
                animation.className = 'click-animation';
                animation.textContent = `+${game.formatNumber(amount)}`;
                animation.style.color = '#000000';
                animation.style.textShadow = '0 0 5px rgba(0, 0, 0, 0.5)';
            }
            
            animation.style.left = (event.clientX - 20) + 'px';
            animation.style.top = (event.clientY - 20) + 'px';
            
            document.body.appendChild(animation);
            
            setTimeout(() => {
                document.body.removeChild(animation);
            }, isCritical ? 1500 : 1000);
        }

        function buyUpgrade(type) {
            const success = game.buyUpgrade(type);
            if (success) {
                // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                const btn = document.getElementById(type + 'Btn');
                btn.style.background = 'linear-gradient(45deg, #3498db, #2980b9)';
                setTimeout(() => {
                    // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ü–≤–µ—Ç, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å
                    const upgrade = game.upgrades[type];
                    const canAfford = game.score >= upgrade.currentPrice;
                    if (canAfford) {
                        btn.style.background = 'linear-gradient(45deg, #27ae60, #2ecc71)';
                    } else {
                        btn.style.background = '#7f8c8d';
                    }
                }, 200);
            }
            game.updateDisplay();
        }

        function saveGame() {
            game.saveGame();
            alert('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
        }

        function resetGame() {
            game.resetGame();
        }

        function exportSave() {
            game.exportSave();
        }

        // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
        window.formatNumber = function(num) {
            return game.formatNumber(num);
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        window.importSave = function(saveString) {
            return game.importSave(saveString);
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        game.updateDisplay();
    </script>
</body>
</html>